<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Weather Predictor</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-r from-sky-500 to-indigo-600 min-h-screen flex items-center justify-center p-6">
  <div class="bg-white shadow-2xl rounded-2xl p-8 w-full max-w-lg">
    <h1 class="text-3xl font-bold text-center text-indigo-700 mb-6">🌦 Weather Predictor</h1>

    <form id="predictForm" class="space-y-4">
      <div>
        <label class="block text-gray-700 font-semibold">Temperature (°C)</label>
        <input type="number" step="0.1" name="Temperature" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-400 outline-none">
      </div>
      <div>
        <label class="block text-gray-700 font-semibold">Humidity (%)</label>
        <input type="number" name="Humidity" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-400 outline-none">
      </div>
      <div>
        <label class="block text-gray-700 font-semibold">Wind Speed (km/h)</label>
        <input type="number" step="0.1" name="Wind_Speed" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-400 outline-none">
      </div>
      <div>
        <label class="block text-gray-700 font-semibold">Precipitation (mm)</label>
        <input type="number" step="0.1" name="Precipitation" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-400 outline-none">
      </div>
      <div>
        <label class="block text-gray-700 font-semibold">Atmospheric Pressure (hPa)</label>
        <input type="number" step="0.1" name="Atmospheric_Pressure" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-400 outline-none">
      </div>
      <div>
        <label class="block text-gray-700 font-semibold">UV Index</label>
        <input type="number" name="UV_Index" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-400 outline-none">
      </div>
      <div>
        <label class="block text-gray-700 font-semibold">Visibility (km)</label>
        <input type="number" step="0.1" name="Visibility_km" required class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-400 outline-none">
      </div>

      <button type="submit" class="w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition-all">Predict</button>
    </form>

    <!-- Result Box -->
    <div id="output" class="mt-6 hidden bg-gray-100 p-4 rounded-lg text-gray-800 text-center text-lg font-semibold"></div>
  </div>

  <script>
    // Map model predictions (adjust as per your model classes)
    const weatherMap = {
      0: "☀️ Sunny",
      1: "🌧 Rainy",
      2: "⛅ Cloudy",
      3: "🌩 Thunderstorm",
      4: "❄ Snowy"
    };

    document.getElementById("predictForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(e.target);
      const data = [{
        Temperature: parseFloat(formData.get("Temperature")),
        Humidity: parseInt(formData.get("Humidity")),
        Wind_Speed: parseFloat(formData.get("Wind_Speed")),
        Precipitation: parseFloat(formData.get("Precipitation")),
        Atmospheric_Pressure: parseFloat(formData.get("Atmospheric_Pressure")),
        UV_Index: parseInt(formData.get("UV_Index")),
        Visibility_km: parseFloat(formData.get("Visibility_km"))
      }];

      const response = await fetch("/predict", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(data)
      });

      const result = await response.json();
      const prediction = result.predictions[0];

      // Show mapped weather condition
      document.getElementById("output").classList.remove("hidden");
      document.getElementById("output").textContent = weatherMap[prediction] || `Prediction: ${prediction}`;
    });
  </script>
</body>
</html>
